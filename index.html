<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hucha Digital</title>

  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@700&display=swap" rel="stylesheet" />

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Rubik', sans-serif;
      background: white;
      color: black;
      transition: background 0.3s, color 0.3s;
      overflow-x: hidden;
    }
    body.dark {
      background: #121212;
      color: #eee;
    }

    .wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      width: 100%;
      padding: 1rem;
      box-sizing: border-box;
    }

    .goal-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      width: 80%;
      max-width: 320px;
      margin-bottom: 8px;
    }
    .goal-label {
      font-weight: 700;
      font-size: 1.2em;
    }
    #goalInput {
      font-size: 1.2em;
      padding: 5px 8px;
      width: 120px;
      border: 2px solid black;
      border-radius: 6px;
      background: transparent;
      color: inherit;
      outline: none;
    }
    .goal-bar-bg {
      width: 80%;
      max-width: 320px;
      height: 16px;
      background: #ddd;
      border-radius: 12px;
      border: 2px solid black;
      margin: 0 auto 15px;
      overflow: hidden;
    }
    .goal-bar-fill {
      height: 100%;
      background: green;
      width: 0%;
      transition: width 0.6s ease;
    }

    #goalName {
      font-size: 1.5em;
      font-weight: 700;
      border: 2px solid black;
      border-radius: 6px;
      padding: 5px 10px;
      width: 80%;
      max-width: 320px;
      margin-bottom: 5px;
      background: transparent;
      color: inherit;
      outline: none;
      text-align: center;
    }

    #counter {
      font-size: 3em;
      margin-bottom: 15px;
      user-select: none;
    }
    .pig {
      font-size: 6em;
      border: 5px solid black;
      border-radius: 50%;
      padding: 20px;
      margin-bottom: 20px;
      user-select: none;
      color: inherit;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #toggleAdd {
      font-weight: 700;
      font-size: 1.2em;
      margin-bottom: 15px;
      padding: 10px 25px;
      border: 2px solid black;
      background: none;
      cursor: pointer;
      color: inherit;
      max-width: 320px;
    }

    #addButtons {
      display: none;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      max-width: 320px;
      margin-bottom: 15px;
    }
    #addButtons button, #addCustomBtn, #editBtn, #resetBtn {
      padding: 10px 20px;
      font-size: 1em;
      border: 2px solid black;
      background: none;
      cursor: pointer;
      font-weight: 700;
      color: inherit;
    }
    #custom {
      padding: 10px;
      font-size: 1em;
      width: 80px;
      text-align: center;
      border: 2px solid black;
      background: transparent;
      color: inherit;
      border-radius: 6px;
    }

    .settings-icon, .piggy-menu-icon {
      position: fixed;
      font-size: 2em;
      cursor: pointer;
      user-select: none;
      color: inherit;
      z-index: 100;
    }
    .settings-icon {
      bottom: 20px;
      right: 20px;
    }
    .piggy-menu-icon {
      top: 20px;
      left: 20px;
    }

    #settingsMenu, #piggyMenu {
      position: fixed;
      background: white;
      border: 2px solid black;
      padding: 10px;
      display: none;
      flex-direction: column;
      gap: 10px;
      border-radius: 8px;
      color: black;
    }
    #settingsMenu {
      bottom: 70px;
      right: 20px;
    }
    #piggyMenu {
      top: 60px;
      left: 20px;
    }
  </style>
</head>
<body>
  <div class="piggy-menu-icon" title="Men√∫ de huchas" onclick="togglePiggyMenu()">‚ò∞</div>
  <div class="settings-icon" title="Ajustes" onclick="toggleSettingsMenu()">‚öôÔ∏è</div>

  <div id="piggyMenu">Aqu√≠ ir√°n las opciones de huchas</div>
  <div id="settingsMenu">Aqu√≠ ir√°n las opciones de ajustes</div>

  <div class="wrapper">
    <div class="goal-container">
      <label for="goalInput" class="goal-label">üéØ Meta (‚Ç¨):</label>
      <input id="goalInput" type="number" min="0" step="0.01" placeholder="Ej: 100" />
    </div>

    <div class="goal-bar-bg"><div id="goalFill" class="goal-bar-fill"></div></div>

    <input id="goalName" type="text" placeholder="Nombre del ahorro (ej. Viaje)" maxlength="30" />

    <div id="counter">‚Ç¨0.00</div>
    <div class="pig">üê∑</div>

    <button id="toggleAdd">Meter a la hucha</button>

    <div id="addButtons">
      <button data-amount="1">+1‚Ç¨</button>
      <button data-amount="5">+5‚Ç¨</button>
      <button data-amount="10">+10‚Ç¨</button>
      <input id="custom" type="number" placeholder="Otra" min="0.01" step="0.01" />
      <button id="addCustomBtn">A√±adir</button>
      <button id="editBtn">Editar total</button>
      <button id="resetBtn" style="color:red;">Reiniciar</button>
    </div>
  </div>

  <script>
    const counter = document.getElementById('counter');
    const toggleAddBtn = document.getElementById('toggleAdd');
    const addButtonsDiv = document.getElementById('addButtons');
    const customInput = document.getElementById('custom');
    const addCustomBtn = document.getElementById('addCustomBtn');
    const editBtn = document.getElementById('editBtn');
    const resetBtn = document.getElementById('resetBtn');
    const goalInput = document.getElementById('goalInput');
    const goalFill = document.getElementById('goalFill');
    const goalName = document.getElementById('goalName');
    const settingsMenu = document.getElementById('settingsMenu');
    const piggyMenu = document.getElementById('piggyMenu');

    let total = 0;
    let goal = 0;

    function updateUI() {
      counter.textContent = `‚Ç¨${total.toFixed(2)}`;
      if (goal > 0) {
        const pct = Math.min((total / goal) * 100, 100);
        goalFill.style.width = pct + '%';
      } else {
        goalFill.style.width = '0%';
      }
    }

    toggleAddBtn.onclick = () => {
      addButtonsDiv.style.display = addButtonsDiv.style.display === 'flex' ? 'none' : 'flex';
      toggleAddBtn.textContent = addButtonsDiv.style.display === 'flex' ? 'Cerrar' : 'Meter a la hucha';
    };

    document.querySelectorAll('[data-amount]').forEach(btn => {
      btn.onclick = () => {
        const amount = parseFloat(btn.getAttribute('data-amount'));
        if (!isNaN(amount)) {
          total += amount;
          updateUI();
        }
      };
    });

    addCustomBtn.onclick = () => {
      const val = parseFloat(customInput.value);
      if (!isNaN(val) && val > 0) {
        total += val;
        customInput.value = '';
        updateUI();
      }
    };

    editBtn.onclick = () => {
      const val = prompt('Nuevo total (‚Ç¨):', total);
      const num = parseFloat(val);
      if (!isNaN(num) && num >= 0) {
        total = num;
        updateUI();
      }
    };

    resetBtn.onclick = () => {
      if (confirm('¬øReiniciar la hucha?')) {
        total = 0;
        updateUI();
      }
    };

    goalInput.oninput = () => {
      const val = parseFloat(goalInput.value);
      goal = isNaN(val) ? 0 : val;
      updateUI();
    };

    goalName.oninput = () => {
      // Aqu√≠ se puede guardar el nombre si se desea
    };

    function toggleSettingsMenu() {
      settingsMenu.style.display = settingsMenu.style.display === 'flex' ? 'none' : 'flex';
      piggyMenu.style.display = 'none';
    }

    function togglePiggyMenu() {
      piggyMenu.style.display = piggyMenu.style.display === 'flex' ? 'none' : 'flex';
      settingsMenu.style.display = 'none';
    }

    updateUI();
  </script>
</body>
</html>
